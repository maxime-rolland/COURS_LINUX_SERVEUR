# ğŸ“˜ Guide d'installation d'une pile LEMP

Ce guide vous accompagne pas Ã  pas pour installer et configurer une pile **LEMP** (Linux, Nginx, MariaDB, PHP) sur votre serveur.

---

## 1. Installation des composants ğŸ’»

Mettez Ã  jour votre systÃ¨me, puis installez tous les paquets nÃ©cessaires en une seule commande.

```bash
sudo apt update && sudo apt upgrade -y
sudo apt install nginx mariadb-server php-fpm php-mysql -y ```

##2. SÃ©curisation de la base de donnÃ©es MariaDB ğŸ”’

ExÃ©cutez le script de sÃ©curisation pour protÃ©ger votre base de donnÃ©es. Il vous demandera de :

- CrÃ©er un mot de passe pour l'utilisateur 'root'

- Supprimer les configurations par dÃ©faut non sÃ©curisÃ©es

```bash

sudo mariadb-secure-installation
```

##3. Configuration de Nginx pour PHP âš™ï¸

Modifiez le fichier de configuration par dÃ©faut de Nginx pour qu'il puisse traiter les requÃªtes PHP.

**Ouvrir le fichier de configuration :**
```bash
sudo nano /etc/nginx/sites-available/default
```

**Remplacez le contenu par le code suivant :**

âš ï¸ Assurez-vous que la version de PHP-FPM ('php8.4-fpm.sock') correspond bien Ã  la version installÃ©e sur votre systÃ¨me.
```nginx

server {
    listen 80;
    listen [::]:80;

    root /var/www/html;
    index index.php index.html index.htm;

    server_name server2.learn-it.local;

    location / {
        try_files $uri $uri/ =404;
    }

    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/run/php/php8.4-fpm.sock;
    }

    location ~ /\.ht {
        deny all;
    }
}
```

**Testez la configuration et redÃ©marrez Nginx :**
``` bash 
sudo nginx -t
sudo systemctl restart nginx && sudo systemctl status nginx
```

## 4. DÃ©marrage des services et permissions ğŸ›¡ï¸

DÃ©marrez les services et appliquez les permissions correctes sur le dossier de votre site web pour Ã©viter les erreurs d'accÃ¨s.

```bash

# DÃ©marrez et activez PHP-FPM
sudo systemctl start php8.4-fpm
sudo systemctl enable php8.4-fpm

# Appliquez les permissions sur le dossier racine du site
sudo chown -R www-data:www-data /var/www/html/
sudo find /var/www/html/ -type d -exec chmod 755 {} \;
sudo find /var/www/html/ -type f -exec chmod 644 {} \;
```
## 5. CrÃ©ation et test des pages âœ…
**Page d'accueil ('index.html')**

```bash 
sudo nano /var/www/html/index.html
```

Ajoutez le contenu suivant :

``` bash 
<!DOCTYPE html>
<html>
<head>
    <title>Mon Serveur LEMP</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>C'est un succÃ¨s !</h1>
    <p>Votre serveur web Nginx fonctionne parfaitement.</p>
</body>
</html>
```

**Page de test PHP ('info.php')**

``` bash
sudo nano /var/www/html/info.php
```


Ajoutez ce code :

```php
<?php phpinfo(); ?>
```

## âœ… VÃ©rification finale

AccÃ©dez dans votre navigateur Ã  :

- http://server2.learn-it.local/

- http://server2.learn-it.local/info.php

Si les pages sâ€™affichent correctement, **votre pile LEMP est fonctionnelle**.

ğŸ›‘ **Important :** une fois le test terminÃ©, supprimez 'info.php' pour des raisons de sÃ©curitÃ© :


```bash 
sudo rm /var/www/html/info.php
```

## ğŸ‰ FÃ©licitations !

Vous avez installÃ© et configurÃ© avec succÃ¨s une pile **LEMP** sur votre serveur ğŸŠ